<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.mall">

	<!-- =========================QNA=================== -->
	<!-- Qna 페이지 -->
	<select id="selectQna" resultType="qnaVO">
      <![CDATA[
     	select * from qna order by indate desc
      ]]>
	</select>

	<!-- qna 답변 -->
	<update id="updateQna" parameterType="qnaVO">
    <![CDATA[
        UPDATE qna
        SET reply=#{reply}, rep=2
        WHERE qseq=#{qseq}
    ]]>
	</update>

	<!-- qna 상세 -->
	<select id="detailQna" resultType="qnaVO" parameterType="int">
      <![CDATA[
      select * from qna where qseq=#{qseq}
      ]]>
	</select>

	<!-- =========================Order=================== -->

	<!-- order 리스트 -->
	<select id="selectOrder" parameterType="java.util.Map" resultType="orderVO">
    	<![CDATA[
    		select * from order_view 
    	]]>
    <where>
	    <choose>
	    	<when test="mname != '' and mname != null">
		    	and mname like '%'||#{mname}||'%'    	
	    	</when>
	    </choose>
    </where>
    order by result desc, oseq desc
	</select>
	
	<!-- order 주문처리 -->
	<update id="updateOrder" parameterType="orderVO">
	  <![CDATA[
	  update order_detail set result=2 where odseq=#{odseq}
	  
	]]>
	</update>
</mapper>